<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>下载 - 曙光将至</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1a202c;
            color: #e2e8f0;
            margin: 0;
            padding: 0;
        }

        nav {
            background-color: #2d3748;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1rem;
        }

        nav .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        nav .logo {
            font-size: 1.25rem;
            font-weight: bold;
        }

        nav .nav-links {
            display: flex;
            gap: 1rem;
        }

        nav .nav-links a {
            color: #a0aec0;
            text-decoration: none;
        }

        nav .nav-links a:hover {
            color: #e2e8f0;
        }

        main {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2.25rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        main p {
            color: #a0aec0;
            margin-bottom: 2rem;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(1, minmax(0, 1fr));
            gap: 1.5rem;
        }

        @media (min-width: 768px) {
            .features {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }

        @media (min-width: 1024px) {
            .features {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }

        .feature {
            background-color: #2d3748;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .downloadOption {
            width: 95%;
            height: 10px;
            background-color: #36568d;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .OptionPS{
            text-align: right;
            font-size: 15px;
            color: #a0aec0;
        }

        .feature h2 {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .feature p {
            color: #a0aec0;
        }

        footer {
            background-color: #2d3748;
            box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1), 0 -2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1rem;
            text-align: right;
            color: #a0aec0;
        }

        #searchInput {
            width: 100%;
            padding: 0.5rem;
            margin-bottom: 1rem;
            border-radius: 0.25rem;
            border: 1px solid #a0aec0;
            background-color: #1a202c;
            color: #e2e8f0;
        }

        #downloadList {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        #downloadList li {
            margin-bottom: 0.5rem;
        }

        #downloadList li a {
            color: #a0aec0;
            text-decoration: none;
        }

        #downloadList li a:hover {
            color: #e2e8f0;
        }

        /* 新增页码导航样式 */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 2rem;
            gap: 0.5rem;
        }

        .pagination a {
            padding: 0.5rem 1rem;
            background-color: #36568d;
            color: #e2e8f0;
            border-radius: 0.25rem;
            text-decoration: none;
        }

        .pagination a:hover {
            background-color: #2c4875;
        }

        .pagination .current {
            background-color: #1a202c;
            border: 1px solid #36568d;
        }

        .pagination .disabled {
            opacity: 0.5;
            pointer-events: none;
        }
    </style>
</head>

<body>
    <!-- 导航栏 -->
    <nav>
        <div class="container">
            <div class="logo">
                曙光将至
            </div>
            <div class="nav-links">
                <a href="https://dawncoming2025.github.io">主页</a>
                <a href="https://dawncoming2025.github.io/recommand">推荐</a>
                <a href="https://dawncoming2025.github.io/download">下载</a>
                <a href="https://dawncoming2025.github.io/blog">博客</a>
                <a href="https://dawncoming2025.github.io/team">团队</a>
            </div>
        </div>
    </nav>

    <!-- 主要内容 -->
    <main>
        <h1>下载大厅</h1>
        <p>
            C++小游戏、MC模组、应用程序，你想要的都在这里！
        </p>
        <div class="feature">
            <h2>下载列表</h2>
            <input type="text" id="searchInput" placeholder="搜索下载项..." style="width: 97%;">
            <ul id="downloadList">
                <!-- 示例下载项 - 实际应用中会根据搜索和分页动态生成 -->
            </ul>
            <!-- 新增页码导航 -->
            <div class="pagination" id="pagination">
                <a href="#" id="prevPage" data-page="prev"><</a>
                <!-- 页码会动态生成 -->
                <a href="#" id="nextPage" data-page="next">></a>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer>
        <div class="footer-container">
            <div class="footer-left">
                <img class="footer-logo" src="https://cdn.luogu.com.cn/upload/image_hosting/jxawvvuq.png" />
                <div class="footer-links-container">
                    <div class="footer-links-column">
                        <a href="https://dawncoming2025.github.io/help/">帮助中心</a>
                        <a href="https://dawncoming2025.github.io/help/faq">反馈问题</a>
                    </div>
                    <div class="footer-links-column">
                        <a href="https://dawncoming2025.github.io/team/join">加入我们</a>
                        <a href="https://dawncoming2025.github.io/help/update">更新日志</a>
                    </div>
                </div>
            </div>
            
            <div class="footer-right">
                <p>Developed by <a href="https://qm.qq.com/q/kD1XNMw2IK" target="_blank">DawnComing</a></p>
                <p>&copy; 2025~2035 曙光将至</p>
                <p>All rights reserved.</p>
            </div>
        </div>
    </footer>
    <script>
        // 模拟数据 - 实际应用中可能从API获取
        const mockData = [
            { id: "FO0001", name: "DCChatting应用软件及源码", type: "应用软件", author: "Alex | 未知领域Honker" },
        ];

        const searchInput = document.getElementById('searchInput');
        const downloadList = document.getElementById('downloadList');
        const pagination = document.getElementById('pagination');
        
        // 每页显示数量
        const itemsPerPage = 10;
        
        // 获取当前URL中的参数
        const urlParams = new URLSearchParams(window.location.search);
        const currentKeyword = urlParams.get('keyword') || '';
        let currentPage = parseInt(urlParams.get('page')) || 1;
        
        // 根据实际数据量计算总页数
        let totalPages = Math.ceil(mockData.length / itemsPerPage);
        
        // 确保当前页码在有效范围内
        currentPage = Math.max(1, Math.min(currentPage, totalPages));
        
        // 设置搜索框的值为当前关键词
        searchInput.value = currentKeyword;
        
        // 处理搜索输入
        searchInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                const keyword = this.value.trim();
                if (keyword) {
                    // 构建新URL并跳转
                    const newUrl = `${window.location.origin}${window.location.pathname}?keyword=${encodeURIComponent(keyword)}&page=1`;
                    window.location.href = newUrl;
                } else {
                    // 如果关键词为空，显示所有结果的第一页
                    const newUrl = `${window.location.origin}${window.location.pathname}?page=1`;
                    window.location.href = newUrl;
                }
            }
        });
        
        // 处理页码点击
        pagination.addEventListener('click', function (e) {
            e.preventDefault();
            const link = e.target.closest('a');
            if (link) {
                const page = link.getAttribute('data-page');
                let newPage;
                
                if (page === 'prev') {
                    newPage = Math.max(1, currentPage - 1);
                } else if (page === 'next') {
                    newPage = Math.min(totalPages, currentPage + 1);
                } else {
                    newPage = parseInt(page);
                }
                
                const keyword = searchInput.value.trim() || '';
                
                // 构建新URL并跳转
                const newUrl = keyword 
                    ? `${window.location.origin}${window.location.pathname}?keyword=${encodeURIComponent(keyword)}&page=${newPage}`
                    : `${window.location.origin}${window.location.pathname}?page=${newPage}`;
                
                window.location.href = newUrl;
            }
        });
        
        // 生成下载项HTML
        function generateDownloadItems(items) {
            downloadList.innerHTML = '';
            
            if (items.length === 0) {
                downloadList.innerHTML = '<li class="text-center py-4 text-gray-400">没有找到匹配的结果</li>';
                return;
            }
            
            items.forEach(item => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <a href="https://dawncoming2025.github.io/download/${item.id}">
                        <div class="downloadOption">
                            <h3>${item.name}</h3>
                            <p class="OptionPS">
                                <br>
                                类型：${item.type}
                                <br>
                                作者：${item.author}
                            </p>
                        </div>
                    </a>
                `;
                downloadList.appendChild(li);
            });
        }
        
        // 生成页码导航
        function generatePagination() {
            // 清空现有页码
            const pageLinksContainer = pagination.querySelector('#prevPage').nextElementSibling;
            if (pageLinksContainer && pageLinksContainer.id === 'pageLinks') {
                pagination.removeChild(pageLinksContainer);
            }
            
            // 创建页码容器
            const pageLinks = document.createElement('div');
            pageLinks.id = 'pageLinks';
            
            // 计算要显示的页码范围
            let startPage, endPage;
            
            if (totalPages <= 5) {
                // 如果总页数少于等于5，显示全部页码
                startPage = 1;
                endPage = totalPages;
            } else if (currentPage <= 3) {
                // 当前页在前3页，显示前5页
                startPage = 1;
                endPage = 5;
            } else if (currentPage >= totalPages - 2) {
                // 当前页在后3页，显示后5页
                startPage = totalPages - 4;
                endPage = totalPages;
            } else {
                // 当前页在中间，显示当前页前后各2页
                startPage = currentPage - 2;
                endPage = currentPage + 2;
            }
            
            // 生成页码链接
            for (let i = startPage; i <= endPage; i++) {
                const link = document.createElement('a');
                link.href = '#';
                link.dataset.page = i;
                link.textContent = i;
                
                if (i === currentPage) {
                    link.classList.add('current');
                }
                
                pageLinks.appendChild(link);
            }
            
            // 插入到上一页和下一页之间
            pagination.insertBefore(pageLinks, pagination.querySelector('#nextPage'));
            
            // 更新上一页和下一页按钮状态
            const prevPage = pagination.querySelector('#prevPage');
            const nextPage = pagination.querySelector('#nextPage');
            
            if (currentPage === 1) {
                prevPage.classList.add('disabled');
            } else {
                prevPage.classList.remove('disabled');
            }
            
            if (currentPage === totalPages) {
                nextPage.classList.add('disabled');
            } else {
                nextPage.classList.remove('disabled');
            }
        }
        
        // 根据关键词过滤数据
        function filterData(keyword) {
            if (!keyword) {
                // 如果没有关键词，返回所有数据
                return mockData;
            }
            
            const searchTerm = keyword.toLowerCase();
            return mockData.filter(item => 
                item.name.toLowerCase().includes(searchTerm) || 
                item.type.toLowerCase().includes(searchTerm) || 
                item.author.toLowerCase().includes(searchTerm)
            );
        }
        
        // 初始化页面
        function initPage() {
            // 过滤数据
            const filteredData = filterData(currentKeyword);
            
            // 根据过滤后的数据量计算总页数
            totalPages = Math.max(1, Math.ceil(filteredData.length / itemsPerPage));
            
            // 确保当前页码不超过实际的总页数
            if (currentPage > totalPages) {
                currentPage = totalPages;
                // 更新URL但不刷新页面
                const urlParams = new URLSearchParams(window.location.search);
                urlParams.set('page', currentPage);
                window.history.replaceState({}, '', `${window.location.pathname}?${urlParams.toString()}`);
            }
            
            // 获取当前页的数据
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, filteredData.length);
            const currentPageData = filteredData.slice(startIndex, endIndex);
            
            // 生成下载项
            generateDownloadItems(currentPageData);
            
            // 生成页码导航
            generatePagination();
        }
        
        // 初始化页面
        initPage();
    </script>
</body>

</html>
